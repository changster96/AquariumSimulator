<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas">
Your browser does not support the canvas element.
</canvas>

<style>
html, body {
  width:  100%;
  height: 100%;
  margin: 0px;
  overflow: hidden;
}
</style>
<script src="entities.js"></script>
<script src="tank.js"></script>
<script>

// Environment methods

var dt = 1.0 / 20; // Time-step. Measured in seconds.
var t = 0.0;
var accumulator = 0.0;

/**
 * Main loop. Runs physics and renderer separately.
 */
function main() {
	new_time = new Date();
    frame_time = (new_time - current_time) / 1000;
	
    if ( frame_time > 0.1 )
        frame_time = 0.1;
    current_time = new_time;

    accumulator += frame_time;
    while ( accumulator >= dt )
    {
        myTank.update(dt);
        t += dt;
        accumulator -= dt;
    }
	myTank.draw(accumulator); // accumulator passed in as a partial frame. For Anti-A purposes
}

function mouse_down(event) {
	canvas_x = event.x - canvas.offsetLeft;
	canvas_y = event.y - canvas.offsetTop;
	myTank.addDonut(canvas_x, canvas_y);
}

var canvas = document.getElementById("myCanvas");
canvas.addEventListener('click', mouse_down, false);
canvas.onmousedown = function(){return false;}; // stops double-click problem
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

var ctx = canvas.getContext("2d");

var current_time = new Date();
var myTank = new Tank();
var mainLooper = setInterval(main, 1);

</script>

</body>
</html>

